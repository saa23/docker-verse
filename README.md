# Docker-Verse

## 1. Fundamental Terms in Docker
- Image 

Read-only templates that contains a set of instructions for creating a Docker container. Images are used as the foundation for running containers. They are often built from a *Dockerfile*.

- Container

Standalone, and executable packages that includes everything needed to run a piece of software, including the code, runtime, system tools, libraries, and settings. Containers are based on Docker Images.

- Registry

Storage and distribution services for Docker images. The most popular is **Docker Hub**.

- Dockerfile

Text files that contains a set of instructions for building a Docker Image. It specifies the base image, any additional software or files to be included, and various configuration settings.

- Volume

Storages of data generated by and used by Docker Containers. It can be used to share data between containers or store data outside the containers.

- Tag

Labels that typically specify a particular version of a Docker Image.

- Compose

Files that defining the instructions of multi-container (multi-service) and the configurations. 

## 2. Basic Commands in Docker
### pulling an image
```
docker pull <IMAGE_NAME>:<TAG>
```
For example:
```
docker pull metabase/metabase:latest
```
### run an image
```
docker run [OPTIONS] -p <PORT-HOST>:<PORT-CONTAINER> --name <CONTAINER_NAME> <IMAGE_NAME>:<TAG>
```
For example:
```
docker run -d -p 3000:3000 --name metabase metabase/metabase:v0.46.4
```
options *-d*(detached mode) means the running command is executed on background.

### check list of built images
```
docker images
```

### check active or stopped containers
check only active containers
```
docker ps
```
check all containers (run and stopped)
```
docker ps -a
```
### start or stopped containers
start a container
```
docker start <CONTAINER-ID>
```
stop a container
```
docker stop <CONTAINER-ID>
```

### access interactive shell within container
```
docker exec -it <CONTAINER-NAME> <SHELL>
```
for example:
```
docker exec -it metabase /bin/bash
```

## 3. Build a Docker Image
To build a docker image usually we need to create a **Dockerfile** file.

Firstly, here are some basic command in Dockerfile file:
- FROM

Decide the base image will be used.

- COPY

Copy file or directory from host to image directory.

- ADD
Similar to COPY, but with additional benefit. It also is able to copy URL and extract zip file.

- WORKDIR

Set the working directory in the Dockerfile.

- EXPOSE

Define port exposed by container running from an image.

- ENTRYPOINT

Set the default executable file when the contrained starts.

- CMD

Similar to ENTRYPOINT. By default it is appended  to ENTRYPOINT when the container starts.

### Exercise 1: Build a simple image
In this exercise, we need:
- Dockerfile (provided in this repo)
- python script named `/script_code/hello_world.py` (provided in this repo)

To build the image
```
docker build -t hello_world .
```
The options *-t* specify a docker tag for the image. If not provided, it defaults to *"latest"*.

Next run the *hello_world* image
```
docker run hello_world
```


### Exercise 2: Build an image requiring dependencies
In this exercise, we need:
- Dockerfile names `Dockerfile_person` (provided in this repo)
- file `requirements.txt` which giving information about dependencies needed (provided in this repo)
- python script named `/script_code/hello_person.py` (provided in this repo)

To build the image
```
docker build -f Dockerfile_person -t hello_person .
```
Here, the option *-f* specify the dockerfile that executed. If not provided, it defaults to file named *Dockerfile*. Since we don't want to docker mistakenly executed other file we need provided it by using command <b>*-f Dockerfile_person*</b>

Next run the *hello_person* image
```
docker run hello_person
```


### Exercise 3: Build an image from  docker-compose
in this exercise, we will build a container which have multi-service (Elasticsearch and Kibana) within it.
Thus we need:
- Docker compose file name `docker-compose.yml` (provided in this repo)

To run the docker-compose file
```
docker-compose up
```

but if your docker-compose file **not** named `docker-compose.yml`, for example `my-docker-compose.yml`, use this command
```
docker-compose -f my-docker-compose.yml up
```